/*!
 * pagepiling.js 1.5.3
 *
 * https://github.com/alvarotrigo/pagePiling.js
 * MIT licensed
 *
 * Copyright (C) 2013 alvarotrigo.com - A project by Alvaro Trigo
 */
!function(e,n,t,o){"use strict";e.fn.pagepiling=function(i){function a(e){e.addClass("pp-table").wrapInner('<div class="pp-tableCell" style="height:100%" />')}function r(n){var t=e(".pp-section.active").index(".pp-section"),o=n.index(".pp-section");return t>o?"up":"down"}function c(n,o){if(null!=H.asynchronousCall)return!1;var i={destination:n,animated:o,activeSection:e(".pp-section.active"),anchorLink:n.data("anchor"),sectionIndex:n.index(".pp-section"),toMove:n,yMovement:r(n),leavingSection:e(".pp-section.active").index(".pp-section")+1};if(!i.activeSection.is(n)){"undefined"==typeof i.animated&&(i.animated=!0),"undefined"!=typeof i.anchorLink&&p(i.anchorLink,i.sectionIndex),i.sectionsToMove=l(i);var a=0;"down"===i.yMovement?(i.translate3d=N(),i.scrolling="-100%",a=H.waitBeforeScrollNext,H.css3||i.sectionsToMove.each(function(e){e!=i.activeSection.index(".pp-section")}),i.animateSection=i.activeSection):(i.translate3d="translate3d(0px, 0px, 0px)",i.scrolling="0",a=H.waitBeforeScrollBack,i.animateSection=n),e.isFunction(H.onLeave)&&H.onLeave.call(this,i.leavingSection,i.sectionIndex+1,i.yMovement),H.asynchronousCall=t.setTimeout(function(){I(i.anchorLink),B(i.anchorLink,i.sectionIndex),Y=i.anchorLink,i.destination.addClass("active").siblings().removeClass("active"),setTimeout(function(){s(i)},H.scrollingSpeed);var e=(new Date).getTime();U=e,t.clearTimeout(H.asynchronousCall),H.asynchronousCall=null},a)}}function s(n){e.isFunction(H.afterLoad)&&H.afterLoad.call(this,n.anchorLink,n.sectionIndex+1)}function l(n){var t;return t="down"===n.yMovement?e(".pp-section").map(function(t){if(t<n.destination.index(".pp-section"))return e(this)}):e(".pp-section").map(function(t){if(t>n.destination.index(".pp-section"))return e(this)})}function p(e,n){H.anchors.length?(location.hash=e,d(location.hash)):d(String(n))}function d(n){n=n.replace("#",""),e("body")[0].className=e("body")[0].className.replace(/\b\s?pp-viewing-[^\s]+\b/g,""),e("body").addClass("pp-viewing-"+n)}function u(){var o=t.location.hash.replace("#",""),i=o,a=e(n).find('.pp-section[data-anchor="'+i+'"]');a.length>0&&c(a,H.animateAnchor)}function v(){var e=(new Date).getTime();return e-U<j+H.scrollingSpeed}function h(){var o=t.location.hash.replace("#","").split("/"),i=o[0];if(i.length&&i&&i!==Y){var a;a=isNaN(i)?e(n).find('[data-anchor="'+i+'"]'):e(".pp-section").eq(i-1),c(a)}}function f(n){var o=(new Date).getTime();n=n||t.event;var i=n.wheelDelta||-n.deltaY||-n.detail,a=Math.max(-1,Math.min(1,i)),r="undefined"!=typeof n.wheelDeltaX||"undefined"!=typeof n.deltaX,c=Math.abs(n.wheelDeltaX)<Math.abs(n.wheelDelta)||Math.abs(n.deltaX)<Math.abs(n.deltaY)||!r;R.length>149&&R.shift(),R.push(Math.abs(i));var s=o-V;if(V=o,s>200&&(R=[]),!v()){var l=e(".pp-section.active"),p=w(l),d=m(R,10),u=m(R,70),h=d>=u;return h&&c&&(a<0?g("down",p):a>0&&g("up",p)),!1}}function m(e,n){for(var t=0,o=e.slice(Math.max(e.length-n,1)),i=0;i<o.length;i++)t+=o[i];return Math.ceil(t/n)}function g(e,n){var t,o;if("down"==e?(t="bottom",o=q.moveSectionDown):(t="top",o=q.moveSectionUp),n.length>0){if(!S(t,n))return!0;o()}else o()}function S(e,n){return"top"===e?!n.scrollTop():"bottom"===e?n.scrollTop()+1+n.innerHeight()>=n[0].scrollHeight:void 0}function w(e){return e.filter(".pp-scrollable")}function y(){A.get(0).addEventListener?(A.get(0).removeEventListener("mousewheel",f,!1),A.get(0).removeEventListener("wheel",f,!1)):A.get(0).detachEvent("onmousewheel",f)}function b(){A.get(0).addEventListener?(A.get(0).addEventListener("mousewheel",f,!1),A.get(0).addEventListener("wheel",f,!1)):A.get(0).attachEvent("onmousewheel",f)}function x(){if(W){var e=M();A.off("touchstart "+e.down).on("touchstart "+e.down,k),A.off("touchmove "+e.move).on("touchmove "+e.move,L)}}function C(){if(W){var e=M();A.off("touchstart "+e.down),A.off("touchmove "+e.move)}}function M(){var e;return e=t.PointerEvent?{down:"pointerdown",move:"pointermove",up:"pointerup"}:{down:"MSPointerDown",move:"MSPointerMove",up:"MSPointerUp"}}function T(e){var n=new Array;return n.y="undefined"!=typeof e.pageY&&(e.pageY||e.pageX)?e.pageY:e.touches[0].pageY,n.x="undefined"!=typeof e.pageX&&(e.pageY||e.pageX)?e.pageX:e.touches[0].pageX,n}function E(e){return"undefined"==typeof e.pointerType||"mouse"!=e.pointerType}function k(e){var n=e.originalEvent;if(E(n)){var t=T(n);z=t.y,F=t.x}}function L(n){var t=n.originalEvent;if(!D(n.target)&&E(t)){var o=e(".pp-section.active"),i=w(o);if(i.length||n.preventDefault(),!v()){var a=T(t);O=a.y,Q=a.x,"horizontal"===H.direction&&Math.abs(F-Q)>Math.abs(z-O)?Math.abs(F-Q)>A.width()/100*H.touchSensitivity&&(F>Q?g("down",i):Q>F&&g("up",i)):Math.abs(z-O)>A.height()/100*H.touchSensitivity&&(z>O?g("down",i):O>z&&g("up",i))}}}function D(n,t){t=t||0;var o=e(n).parent();return!!(t<H.normalScrollElementTouchThreshold&&o.is(H.normalScrollElements))||t!=H.normalScrollElementTouchThreshold&&D(o,++t)}function P(){e("body").append('<div id="pp-nav"><ul></ul></div>');var n=e("#pp-nav");n.css("color",H.navigation.textColor),n.addClass(H.navigation.position);for(var t=0;t<e(".pp-section").length;t++){var o="";if(H.anchors.length&&(o=H.anchors[t]),"undefined"!==H.navigation.tooltips){var i=H.navigation.tooltips[t];"undefined"==typeof i&&(i="")}n.find("ul").append('<li data-tooltip="'+i+'"><a href="#'+o+'"><span></span></a></li>')}n.find("span").css("border-color",H.navigation.bulletsColor)}function B(n,t){H.navigation&&(e("#pp-nav").find(".active").removeClass("active"),n?e("#pp-nav").find('a[href="#'+n+'"]').addClass("active"):e("#pp-nav").find("li").eq(t).find("a").addClass("active"))}function I(n){H.menu&&(e(H.menu).find(".active").removeClass("active"),e(H.menu).find('[data-menuanchor="'+n+'"]').addClass("active"))}function X(){var e,i=n.createElement("p"),a={webkitTransform:"-webkit-transform",OTransform:"-o-transform",msTransform:"-ms-transform",MozTransform:"-moz-transform",transform:"transform"};n.body.insertBefore(i,null);for(var r in a)i.style[r]!==o&&(i.style[r]="translate3d(1px,1px,1px)",e=t.getComputedStyle(i).getPropertyValue(a[r]));return n.body.removeChild(i),e!==o&&e.length>0&&"none"!==e}function N(){return"vertical"!==H.direction?"translate3d(-100%, 0px, 0px)":"translate3d(0px, -100%, 0px)"}var Y,q=e.fn.pagepiling,A=e(this),U=0,W="ontouchstart"in t||navigator.msMaxTouchPoints>0||navigator.maxTouchPoints,z=0,F=0,O=0,Q=0,R=[],j=600,H=e.extend(!0,{direction:"vertical",menu:null,verticalCentered:!0,sectionsColor:[],anchors:[],scrollingSpeed:700,waitBeforeScrollBack:0,waitBeforeScrollNext:0,asynchronousCall:null,easing:"easeInQuart",loopBottom:!1,loopTop:!1,css3:!0,navigation:{textColor:"#000",bulletsColor:"#000",position:"right",tooltips:[]},normalScrollElements:null,normalScrollElementTouchThreshold:5,touchSensitivity:5,keyboardScrolling:!0,sectionSelector:".section",animateAnchor:!1,afterLoad:null,onLeave:null,afterRender:null,onPilingEnd:null},i);e.extend(e.easing,{easeInQuart:function(e,n,t,o,i){return o*(n/=i)*n*n*n+t}}),q.setScrollingSpeed=function(e){H.scrollingSpeed=e},q.setMouseWheelScrolling=function(e){e?b():y()},q.setAllowScrolling=function(e){e?(q.setMouseWheelScrolling(!0),x()):(q.setMouseWheelScrolling(!1),C())},q.setKeyboardScrolling=function(e){H.keyboardScrolling=e},q.moveSectionUp=function(){var n=e(".pp-section.active").prev(".pp-section");!n.length&&H.loopTop&&(n=e(".pp-section").last()),n.length&&c(n)},q.moveSectionDown=function(){var n=e(".pp-section.active").next(".pp-section");!n.length&&H.loopBottom&&(n=e(".pp-section").first()),n.length||"function"!=typeof H.onPilingEnd||H.onPilingEnd(),n.length&&c(n)},q.moveTo=function(t){var o="";o=isNaN(t)?e(n).find('[data-anchor="'+t+'"]'):e(".pp-section").eq(t-1),o.length>0&&c(o)},e(H.sectionSelector).each(function(){e(this).addClass("pp-section")}),H.css3&&(H.css3=X()),e(A).css({overflow:"hidden","-ms-touch-action":"none","touch-action":"none"}),q.setAllowScrolling(!0),e.isEmptyObject(H.navigation)||P();var K=e(".pp-section").length;e(".pp-section").each(function(n){e(this).data("data-index",n),e(this).css("z-index",K),n||0!==e(".pp-section.active").length||e(this).addClass("active"),"undefined"!=typeof H.anchors[n]&&e(this).attr("data-anchor",H.anchors[n]),"undefined"!=typeof H.sectionsColor[n]&&e(this).css("background-color",H.sectionsColor[n]),H.verticalCentered&&!e(this).hasClass("pp-scrollable")&&a(e(this)),K-=1}).promise().done(function(){H.navigation&&(e("#pp-nav").css("margin-top","-"+e("#pp-nav").height()/2+"px"),e("#pp-nav").find("li").eq(e(".pp-section.active").index(".pp-section")).find("a").addClass("active")),e(t).on("load",function(){u()}),e.isFunction(H.afterRender)&&H.afterRender.call(this)}),e(t).on("hashchange",h),e(n).keydown(function(n){if(H.keyboardScrolling&&!v())switch(n.which){case 38:case 33:q.moveSectionUp();break;case 40:case 34:q.moveSectionDown();break;case 36:q.moveTo(1);break;case 35:q.moveTo(e(".pp-section").length);break;case 37:q.moveSectionUp();break;case 39:q.moveSectionDown();break;default:return}}),H.normalScrollElements&&(e(n).on("mouseenter",H.normalScrollElements,function(){q.setMouseWheelScrolling(!1)}),e(n).on("mouseleave",H.normalScrollElements,function(){q.setMouseWheelScrolling(!0)}));var V=(new Date).getTime();e(n).on("click touchstart","#pp-nav a",function(n){n.preventDefault();var t=e(this).parent().index();c(e(".pp-section").eq(t))}),e(n).on({mouseenter:function(){var n=e(this).data("tooltip");e('<div class="pp-tooltip '+H.navigation.position+'">'+n+"</div>").hide().appendTo(e(this)).fadeIn(200)},mouseleave:function(){e(this).find(".pp-tooltip").fadeOut(200,function(){e(this).remove()})}},"#pp-nav li")}}(jQuery,document,window);
//# sourceMappingURL=jquery.pagepiling.min.js.map
